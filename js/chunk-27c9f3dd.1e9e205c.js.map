{"version":3,"sources":["webpack:///./src/views/UserEdit.vue?ce97","webpack:///./src/views/UserEdit.vue?c019","webpack:///src/views/UserEdit.vue","webpack:///./src/views/UserEdit.vue?2b31","webpack:///./src/views/UserEdit.vue?b8dc"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","stopPropagation","preventDefault","handleSubmit","attrs","_f","avatar","handleFileChange","directives","name","rawName","value","expression","domProps","target","composing","introduction","isProcessing","_v","staticRenderFns","mixins","components","Spinner","data","id","isLoading","created","fetchUser","userId","methods","component"],"mappings":"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","file":"js/chunk-27c9f3dd.1e9e205c.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=599d4ffe&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=599d4ffe&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLoading)?_c('Spinner'):_c('section',{staticClass:\"container\"},[_c('form',{staticClass:\"row\",on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"col-12 col-md-3 bg-white rounded p-3 mr-3 mb-3 mb-md-0\"},[_c('img',{staticClass:\"rounded img-thumbnail w-100\",attrs:{\"src\":_vm._f(\"placeholderImage\")(_vm.avatar),\"alt\":\"avatar\"}}),_c('div',{staticClass:\"form-group mt-3\"},[_c('input',{staticClass:\"form-control-file\",attrs:{\"type\":\"file\",\"id\":\"avatar\",\"name\":\"avatar\",\"accept\":\".jpg, .jpeg, .png\"},on:{\"input\":_vm.handleFileChange}})])]),_c('div',{staticClass:\"col-12 col-md-8 bg-white rounded p-3\"},[_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"name\",\"name\":\"name\",\"placeholder\":\"Name\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_c('div',{staticClass:\"form-group\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.introduction),expression:\"introduction\"}],staticClass:\"form-control\",attrs:{\"placeholder\":\"Type any thing about you here...\",\"id\":\"introduction\",\"name\":\"introduction\",\"rows\":\"3\"},domProps:{\"value\":(_vm.introduction)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.introduction=$event.target.value}}})]),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\"Submit\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Spinner v-if=\"isLoading\" />\n  <section v-else class=\"container\">\n    <form @submit.stop.prevent=\"handleSubmit\" class=\"row\">\n      <div class=\"col-12 col-md-3 bg-white rounded p-3 mr-3 mb-3 mb-md-0\">\n        <img :src=\"avatar | placeholderImage\" alt=\"avatar\" class=\"rounded img-thumbnail w-100\" />\n        <div class=\"form-group mt-3\">\n          <input\n            @input=\"handleFileChange\"\n            type=\"file\"\n            class=\"form-control-file\"\n            id=\"avatar\"\n            name=\"avatar\"\n            accept=\".jpg, .jpeg, .png\"\n          />\n        </div>\n      </div>\n      <div class=\"col-12 col-md-8 bg-white rounded p-3\">\n        <div class=\"form-group\">\n          <input\n            v-model=\"name\"\n            type=\"text\"\n            class=\"form-control\"\n            id=\"name\"\n            name=\"name\"\n            placeholder=\"Name\"\n          />\n        </div>\n        <div class=\"form-group\">\n          <textarea\n            v-model=\"introduction\"\n            placeholder=\"Type any thing about you here...\"\n            class=\"form-control\"\n            id=\"introduction\"\n            name=\"introduction\"\n            rows=\"3\"\n          ></textarea>\n        </div>\n        <div class=\"text-right\">\n          <button class=\"btn\" type=\"submit\" :disabled=\"isProcessing\">Submit</button>\n        </div>\n      </div>\n    </form>\n  </section>\n</template>\n\n<script>\nimport { placeholderImageCreator } from \"../utils/mixins\";\nimport userAPI from \"../apis/users\";\nimport { Toast } from \"../utils/helpers\";\nimport Spinner from \"../components/Spinner\";\n\nexport default {\n  mixins: [placeholderImageCreator],\n  components: {\n    Spinner\n  },\n  data() {\n    return {\n      id: \"\",\n      name: \"\",\n      introduction: \"\",\n      avatar: \"\",\n      isLoading: true,\n      isProcessing: false\n    };\n  },\n  created() {\n    const userId = this.$route.params.id;\n    this.fetchUser(userId);\n  },\n  methods: {\n    async fetchUser(userId) {\n      try {\n        // update loading status\n        this.isLoading = true;\n        const { data, statusText } = await userAPI.getEditUser({ userId });\n        // error handing\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update data\n        this.id = data.user.id;\n        this.name = data.user.name;\n        this.introduction = data.user.introduction;\n        this.avatar = data.user.avatar;\n        // update loading status\n        this.isLoading = false;\n      } catch (error) {\n        // update loading status\n        this.isLoading = false;\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannot get your data, please try again later\"\n        });\n      }\n    },\n    async handleFileChange(e) {\n      // access the image\n      const file = e.target.files[0];\n      if (!file) return;\n      // create url for the url\n      const url = window.URL.createObjectURL(file);\n      // update avatar url\n      this.avatar = url;\n    },\n    async handleSubmit(e) {\n      if (!this.name) {\n        Toast.fire({\n          type: \"error\",\n          title: \"Please enter your name\"\n        });\n        return;\n      }\n      // create fromData object for the form\n      const form = e.target;\n      const formData = new FormData(form);\n      try {\n        // update processing status\n        this.isProcessing = true;\n        const { data, statusText } = await userAPI.postEditUser({\n          formData,\n          userId: this.id\n        });\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        // update user data in Vuex\n        this.$store.commit(\"setCurrentUser\", { avatar: this.avatar });\n        // redirect back to user page\n        this.$router.push(`/users/${this.id}/tweets`);\n      } catch (error) {\n        // update processing status\n        this.isProcessing = false;\n        Toast.fire({\n          type: \"error\",\n          title:\n            error.message ||\n            \"Cannot update your profile, please try again later\"\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.btn {\n  background: #1da1f2;\n  color: white;\n  padding: 0.1rem 0.7rem;\n}\n\n.btn:hover {\n  background: #006dbf;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserEdit.vue?vue&type=template&id=599d4ffe&scoped=true&\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserEdit.vue?vue&type=style&index=0&id=599d4ffe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"599d4ffe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}